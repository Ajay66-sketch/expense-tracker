<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h1>Expense Tracker</h1>

<p>Welcome, {{ session.username }}</p>

<a href="/logout">Logout</a>

<h2>Add Expense</h2>
<form method="POST">
    <input type="text" name="title" placeholder="Title" required>
    <input type="number" step="0.01" name="amount" placeholder="Amount" required>
    <input type="text" name="category" placeholder="Category" required>
    <button type="submit">Add</button>
</form>

<h2>Total Spent: â‚¹{{ total }}</h2>

<h2>Your Expenses</h2>
<table border="1">
    <tr>
        <th>Title</th>
        <th>Amount</th>
        <th>Category</th>
        <th>Date</th>
        <th>Actions</th>
    </tr>
    {% for e in expenses %}
    <tr>
        <td>{{ e.title }}</td>
        <td>{{ e.amount }}</td>
        <td>{{ e.category }}</td>
        <td>{{ e.created_at }}</td>
        <td>
            <form action="/delete/{{ e.id }}" method="POST" style="display:inline;">
                <button type="submit">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

{% if is_premium %}
<h2>Category Summary</h2>
<ul>
    {% for c in category_summary %}
        <li>{{ c.category }} : â‚¹{{ c.total }}</li>
    {% endfor %}
</ul>

<a href="/export">Export CSV</a>
{% else %}
<p>ðŸ”’ Upgrade to premium to see category summary & export</p>
{% endif %}

</body>
</html>
