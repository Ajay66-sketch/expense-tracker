{% extends "base.html" %}

{% block title %}Edit Expense - Expense Tracker{% endblock %}

{% block content %}
<div class="container" style="max-width:400px; margin: 3rem auto; text-align:center;">
    <h2>✏️ Edit Expense</h2>

    <form method="POST"
          action="{{ url_for('edit', id=expense.id) }}"
          style="display:flex; flex-direction:column; gap:10px; margin-top:20px;"
          autocomplete="off">

        <!-- CRITICAL: CSRF Token -->
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>

        <input type="text" name="title" value="{{ expense.title }}" required autocomplete="off">

        <select name="category" required>
            {% for option in ['Food','Travel','Shopping','Bills','Other'] %}
                <option value="{{ option }}" {% if expense.category == option %}selected{% endif %}>
                    {{ option }}
                </option>
            {% endfor %}
        </select>

        <input type="number" step="0.01" name="amount" value="{{ '%.2f'|format(expense.amount) }}" required>

        <button type="submit">Update</button>
    </form>

    <p style="margin-top:15px;">
        <a href="{{ url_for('index') }}">Back to Expenses</a>
    </p>
</div>
{% endblock %}
